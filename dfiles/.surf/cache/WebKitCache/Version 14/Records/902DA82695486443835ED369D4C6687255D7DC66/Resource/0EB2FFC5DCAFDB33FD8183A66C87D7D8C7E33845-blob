(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[8],{"0Wmr":function(e,t,n){"use strict";n.d(t,"c",function(){return i}),n.d(t,"d",function(){return l}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return s});var r=n("UhjI"),o=n("ePT2"),a="collaborator_approve_invite";function i(e,t){return o.a.create("BoardEmailInviteResource",{board_id:e,emails:t}).callCreate()}function l(e,t){return o.a.create("BoardInviteResource",{board_id:e,invited_user_ids:t}).callCreate()}function c(e,t){return function(n){return o.a.create("BoardInviteResource",{board_id:e,invited_user_id:t}).callUpdate().then(function(){r.a.trackEvent(a,"success")}).catch(function(){return r.a.trackEvent(a,"error")})}}function s(e,t,n){return function(t){var r=e.invited_user,a=e.status,i=e.board.id;return o.a.create("accepted"===a?"BoardCollaboratorResource":"BoardInviteResource",{ban:n,board_id:i,field_set_key:"boardEdit",invited_user_id:r.id}).callDelete({showError:!1})}}},"3Wjl":function(e,t,n){"use strict";function r(e){return{type:"UPDATE_USER_PIN_COUNT",payload:e}}function o(e){return{type:"UPDATE_USER_SCHEDULED_PIN_COUNT",payload:e}}n.d(t,"a",function(){return r}),n.d(t,"b",function(){return o})},CAUj:function(e,t,n){"use strict";n.d(t,"e",function(){return o}),n.d(t,"f",function(){return a}),n.d(t,"d",function(){return i}),n.d(t,"c",function(){return l}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return s});var r=n("7Iyi"),o=function(e,t){return function(n){return n(Object(r.a)("BoardResource",{board_id:e,field_set_key:t}))}},a=function(e){return o(e,"pin_count")},i=function(e){return{type:"BOARD_PIN_COUNT_CHANGED",payload:e}},l=function(e){return{type:"BOARD_INVITE_ACCEPTED_BY_VIEWER",payload:{boardId:e}}},c=function(e,t){return{type:"BOARD_COVER_IMAGE_UPDATED",payload:{boardId:e,coverPin:t}}},s=function(e){return{type:"BOARD_DISABLE_MORE_IDEAS_BADGING",payload:{boardId:e}}}},HcVA:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n("GyhR"),o=n.n(r);n("hvnN");function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var u=function(e){function t(e,n){var r,o,i,c,u,d;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=l(t).call(this,e,n),r=!i||"object"!==a(i)&&"function"!=typeof i?s(o):i,c=s(s(r)),d=function(e){r.props.onChange&&r.props.onChange(e.target.value),r.setState({value:e.target.value,hasChanged:!0})},(u="handleChange")in c?Object.defineProperty(c,u,{value:d,enumerable:!0,configurable:!0,writable:!0}):c[u]=d,r.state={isFocused:r.props.focused||!1,value:r.props.value,hasChanged:void 0!==r.props.value},r}var n,u,d;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,r["Component"]),n=t,(u=[{key:"componentDidMount",value:function(){this.state.isFocused&&this._input.focus()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({value:e.value})}},{key:"getId",value:function(){return this.props.id}},{key:"getValue",value:function(){return this.state.value}},{key:"focus",value:function(){this._input.focus()}},{key:"render",value:function(){var e=this;return o.a.createElement("input",{autoComplete:this.props.autoComplete,className:this.props.className,disabled:this.props.disabled?"disabled":"",id:this.props.id,name:this.props.name,onBlur:this.props.onBlur?this.props.onBlur.bind(this):null,onChange:this.handleChange,onClick:this.props.onClick?this.props.onClick.bind(this):null,onFocus:this.props.onFocus?this.props.onFocus.bind(this):null,onKeyDown:this.props.onKeyDown?this.props.onKeyDown.bind(this):null,placeholder:this.props.placeholder,ref:function(t){e._input=t},style:this.props.style,type:this.props.type,value:this.state.value||""})}}])&&i(n.prototype,u),d&&i(n,d),t}();u.defaultProps={type:"text"}},JXQe:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),a=n("Qo1m"),i=n("HcVA"),l=(n("hvnN"),n("vBbO")),c=n("SMmS"),s=n("VSY/"),u=n("+U6O");function d(e){var t=e.body,n=e.img,o=e.onClick,i=e.selected,l=e.title,c=e.username,s=e.valid,d=c||t;return r.createElement(u.b,{marginBottom:4},r.createElement(u.P,{onTouch:o},r.createElement(u.b,{display:"flex",alignItems:"center",direction:"row",width:"100%"},n,r.createElement(u.b,{marginLeft:3,flex:"grow",marginRight:2},r.createElement(u.b,{marginBottom:1},r.createElement(u.K,{bold:!0,size:"md",truncate:!0},l)),r.createElement(u.K,{size:"xs",truncate:!0},d)),r.createElement(u.b,{marginLeft:2},function(e,t){if(c)return e?r.createElement(u.n,{icon:"check-circle",color:"red",accessibilityLabel:a.a._("Confirmation an invite will be sent","Alt tags on a check box on the board create flow for board invites"),size:32}):r.createElement(u.b,{height:32,width:32,shape:"circle",dangerouslySetInlineStyle:{__style:{border:"solid 1px #B5B5B5"}}});var n={text:a.a._("Sent","Sent a board collaborator invite"),color:"gray",size:"sm",disabled:!0,inline:!0};return e||(n.text=a.a._("Invite","Add board collaborator invite"),n.disabled=Boolean(!t)),r.createElement(u.c,n)}(i,s)))))}var p=n("0Wmr");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t,n){var r=e.id;return t===n.findIndex(function(e){return e.id===r})}var _=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return r=this,o=(e=b(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==m(o)&&"function"!=typeof o?g(r):o,y(g(g(n)),"state",{selectedCollaborators:[],showCollabList:!1,showSocialConnectPanel:!1,typeaheadSuggestions:[],value:""}),y(g(g(n)),"handleTextFieldChange",function(e){n.setState({value:e})}),y(g(g(n)),"handleCollaboratorClick",function(e){var t=e.id,r=e.type;n.isIdSelected[t]=!n.isIdSelected[t];var o=n.state.selectedCollaborators.concat([e]),a="email"===r?p.c:p.d;n.props.onSelectedCollaboratorsChange({id:t,resource:a}),n.setState({selectedCollaborators:o})}),y(g(g(n)),"handleTypeaheadSuggestionsChange",function(e){n.setState({typeaheadSuggestions:e})}),y(g(g(n)),"handleToggleCollabList",function(){n.setState(function(e){return{showCollabList:!e.showCollabList}})}),y(g(g(n)),"isIdSelected",{}),n}var n,c,_;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(t,r["Component"]),n=t,(c=[{key:"render",value:function(){var e=this,t=this.state,n=t.value,c=t.showCollabList,p=this.props.inCollabInBoardCreateExperiment,m=(""===n?this.props.shareSuggestions:this.state.selectedCollaborators.concat(this.state.typeaheadSuggestions).concat({type:"email",id:n,valid:Object(s.g)(n)}).concat(this.props.shareSuggestions).filter(v)).map(function(t,n){return function(e,t,n){if("user_share_suggestion"===e.type||"user"===e.type){var o=r.createElement(u.a,{name:e.title||e.full_name,src:e.image_medium_url,size:"md"});return r.createElement(d,{img:o,onClick:function(){return n(e)},selected:t,title:e.full_name,username:e.username})}if("email"===e.type){var i,l,c=e.id,p=e.valid,m=r.createElement(u.b,{shape:"circle",color:"lightGray",height:40,width:40,display:"flex",justifyContent:"center",alignItems:"center"},r.createElement(u.n,{color:"darkGray",icon:"envelope",size:20,accessibilityLabel:a.a._("Email icon","Email icon on board create modal")})),f=Object(s.c)(a.a._("Email {{ email }}"),{email:c});return t?(i=a.a._("Done!","Text that lets the user know we sent the board invite email"),l=function(){}):(i=p?a.a._("Click to send!","Text that lets the user know they can successfully send a board invite email"):a.a._("Keep typing!","Text that lets a user know the email they are typing is not valid yet"),l=function(){return p?n(e):void 0}),r.createElement(d,{body:i,img:m,onClick:l,selected:t,title:f,valid:p})}}(t,e.isIdSelected[t.id],e.handleCollaboratorClick)}).map(function(e,t){return o.a.createElement("li",{key:t},e)}),f=p?o.a.createElement(u.P,{onTouch:this.handleToggleCollabList},o.a.createElement(u.d,null,o.a.createElement(u.b,{display:"flex",alignItems:"center",justifyContent:"between",paddingX:3,marginTop:3,marignBottom:1,paddingY:3},o.a.createElement(u.K,{size:"md"},a.a._("Add collaborators (optional)","Optional field to add collaborators to a board on board create")),o.a.createElement(u.n,{accessibilityLabel:"",icon:c?"arrow-down":"arrow-forward"})))):o.a.createElement(u.b,{paddingX:3,marginBottom:4,marginTop:3,paddingY:3},o.a.createElement(u.K,{size:"md"},a.a._("Add collaborators (optional)","Optional field to add collaborators to a board on board create")));return o.a.createElement(u.b,{display:"flex",direction:"column",height:"100%"},f,(p&&c||!p)&&o.a.createElement(o.a.Fragment,null,o.a.createElement(u.b,{paddingX:3,marginTop:2,marginBottom:4,width:"100%"},o.a.createElement(u.b,{dangerouslySetInlineStyle:{__style:{borderRadius:"4px"}},color:"lightGray",flex:"grow",display:"flex",alignItems:"center",height:40,position:"relative"},o.a.createElement(u.b,{paddingX:4,height:"100%",position:"absolute",top:!0,left:!0,display:"flex",alignItems:"center"},o.a.createElement(u.n,{accessibilityLabel:"",icon:"search",size:20})),o.a.createElement(l.a,{onTypeaheadSuggestionsChange:this.handleTypeaheadSuggestionsChange,resourceName:"ShareSuggestionsTypeaheadResource",value:n},o.a.createElement(i.a,{className:"SearchBoxInput",onChange:this.handleTextFieldChange,placeholder:a.a._("Search by name or email"),value:n})))),o.a.createElement(u.b,{paddingX:3,overflow:"scrollY"},o.a.createElement("ul",null,m))))}}])&&f(n.prototype,c),_&&f(n,_),t}();y(_,"defaultProps",{shareSuggestions:[]});t.a=Object(c.b)({name:"ShareSuggestionsResource",key:"shareSuggestions"},{allowStale:!1})(_)},VcmA:function(e,t,n){"use strict";var r=n("GyhR"),o=n("Qo1m"),a=n("ePT2"),i=n("CAUj"),l=n("VSY/"),c=n("+U6O");function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){b(e,t,n[t])})}return e}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(){return r.createElement("div",{className:"ImageCrop"},r.createElement("div",{className:"holder"},r.createElement(c.b,{position:"absolute",top:!0,bottom:!0,left:!0,right:!0,display:"flex",alignItems:"center",justifyContent:"center"},r.createElement(c.G,{accessibilityLabel:o.a._("Loading","accessibility label for loading spinner"),show:!0}))))}var g={border:0,top:120},y=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return r=this,o=(e=p(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==s(o)&&"function"!=typeof o?f(r):o,b(f(f(n)),"state",{deltaY:0,deltaX:0,holderHeight:0,holderWidth:0,isSpinnerShown:!0,startBgPos:{left:0,top:0}}),b(f(f(n)),"handleUpdateImage",function(){var e=n.image;if(e){var t=e.offsetHeight,r=e.offsetWidth;n.setState({isSpinnerShown:!1,startBgPos:{left:-(r-n.state.holderWidth)/2,top:-(t-n.state.holderHeight)/2}})}}),b(f(f(n)),"handleOnMouseUp",function(){n.isDragging=!1,n.setState({startBgPos:{left:n.getBgLeft(),top:n.getBgTop()},deltaX:0,deltaY:0}),n.props.updateImgCrop(n.getCropData())}),b(f(f(n)),"isDragging",!1),n}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(t,r["Component"]),n=t,(a=[{key:"componentDidMount",value:function(){this.holder&&this.setState({holderHeight:this.holder.offsetHeight,holderWidth:this.holder.offsetWidth}),document.body&&document.body.addEventListener("mouseup",this.handleOnMouseUp,!1)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){e.pin.id!==this.props.pin.id&&this.setState({isSpinnerShown:!0})}},{key:"componentWillUnmount",value:function(){document.body&&document.body.removeEventListener("mouseup",this.handleOnMouseUp)}},{key:"getFrameBounds",value:function(){var e=this.props,t=e.frameHeight,n=e.frameWidth,r=this.state,o=r.holderHeight;return{left:r.holderWidth/2-n/2,width:n,height:t,top:o/2-t/2}}},{key:"getBgLeft",value:function(){var e=this.props.frameWidth,t=this.getFrameBounds(),n=this.getImgScale(),r=this._getImageDimensions(),o=r.imgHeight*n,a=r.imgWidth*n,i=0;return o&&a&&((i=this.state.startBgPos.left+this.state.deltaX)+a-e<t.left&&(i=t.left-a+e),i>t.left&&(i=t.left)),i}},{key:"getBgTop",value:function(){var e=this.props.frameHeight,t=this.getFrameBounds(),n=this.getImgScale(),r=this._getImageDimensions(),o=r.imgHeight*n,a=r.imgWidth*n,i=0;return o&&a&&((i=this.state.startBgPos.top+this.state.deltaY)+o-e<t.top&&(i=t.top-o+e),i>t.top&&(i=t.top)),i}},{key:"getImgScale",value:function(){var e=this.props,t=e.frameHeight,n=e.frameWidth,r=this._getImageDimensions(),o=r.imgHeight,a=r.imgWidth,i=this.getFrameBounds();if(o&&a){var l=o/a;return l=l>=i.height/i.width?n/a:t/o}return 1}},{key:"getImageBounds",value:function(){var e=this._getImageDimensions(),t=e.imgHeight,n=e.imgWidth,r={};if(t&&n){var o=this.getImgScale();r={width:o*n,height:o*t}}return r}},{key:"getBgBounds",value:function(){return{left:this.getBgLeft(),top:this.getBgTop()}}},{key:"getCropData",value:function(){var e=this.props,t=e.frameHeight,n=e.frameWidth,r=this.getFrameBounds(),o=this.getBgBounds(),a=this.getImgScale();return{cropX:Math.round(-(o.left-r.left)/a),cropY:Math.round(-(o.top-r.top)/a),height:Math.round(t/a),width:Math.round(n/a),scale:a}}},{key:"handleOnMouseDown",value:function(e){0===e.button&&(e.stopPropagation(),this.isDragging=!0,this.originX=e.pageX,this.originY=e.pageY)}},{key:"handleOnMouseMove",value:function(e){this.isDragging&&this.setState({deltaX:e.pageX-(this.originX||0),deltaY:e.pageY-(this.originY||0)})}},{key:"_getImageDimensions",value:function(){var e=this.props.pin.images["236x"];return{imgHeight:e.height,imgWidth:e.width}}},{key:"render",value:function(){var e=this,t=this.props,n=t.boardName,a=t.frameHeight,i=t.frameWidth,s=t.isFirst,d=t.isLast,p=t.pin,m=t.showNextPin,f=t.showPrevPin,b=this.state.isSpinnerShown,h=this._getImageDimensions(),y=h.imgHeight,v=h.imgWidth,_=this.getFrameBounds(),E=this.getImageBounds(),C=this.getBgBounds(),S="";return y&&v&&(S="in"),r.createElement("div",{className:"ImageCrop"},r.createElement("div",{className:"holder",ref:function(t){e.holder=t}},r.createElement("div",{className:"bg",style:C},r.createElement("img",{alt:l.c(o.a._("Board cover for {{ boardName }}"),{boardName:n}),className:S,onLoad:this.handleUpdateImage,ref:function(t){e.image=t},src:p.images["236x"].url,style:E})),r.createElement("div",{className:"mask"},r.createElement("span",{style:{top:0,left:0,right:0,height:_.top}}),r.createElement("span",{style:{top:_.top,left:_.left+i,right:0,height:a}}),r.createElement("span",{style:{top:a+_.top,left:0,right:0,bottom:0}}),r.createElement("span",{style:{top:_.top,left:0,width:_.left,height:a}})),r.createElement("div",{className:"frame",style:_}),r.createElement("div",{className:"drag",onMouseDown:function(t){e.handleOnMouseDown(t)},onMouseMove:function(t){e.handleOnMouseMove(t)}}),r.createElement("div",{className:"spinner",style:{display:b?"":"none"}})),s?null:r.createElement(c.b,{position:"absolute",width:46,height:46,dangerouslySetInlineStyle:{__style:u({},g,{left:100})}},r.createElement(c.o,{icon:"arrow-back",accessibilityLabel:o.a._("Previous","Label for indicating selecting the previous pin"),onClick:f})),d?null:r.createElement(c.b,{position:"absolute",width:46,height:46,dangerouslySetInlineStyle:{__style:u({},g,{right:100})}},r.createElement(c.o,{icon:"arrow-forward",accessibilityLabel:o.a._("Next","Label for indicating selecting the previous pin"),onClick:m})))}}])&&d(n.prototype,a),i&&d(n,i),t}();b(y,"defaultProps",{frameHeight:236,frameWidth:236});var v=n("Y2BC");function _(e){return(_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){return e.reduce(function(e,t){return"pin"===t.type&&e.push(t),e},[])}function P(e){var t=e.boardFeedResource.data,n=e.board.cover_pin.pin_id;return Math.max(0,I(t||[]).findIndex(function(e){return e.id===n}))}var k=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var l=arguments.length,c=new Array(l),s=0;s<l;s++)c[s]=arguments[s];return r=this,o=(e=C(t)).call.apply(e,[this].concat(c)),n=!o||"object"!==_(o)&&"function"!=typeof o?w(r):o,O(w(w(n)),"state",{coverPinIndex:P(n.props),imgCropData:null,isSaving:!1}),O(w(w(n)),"handleSave",function(){var e=n.props,t=e.board,r=e.dispatch,o=n.state,l=o.coverPinIndex,c=o.imgCropData,s=(n.pins||[])[l];if(s){n.setState({isSaving:!0});var u=s.images["236x"],d=u.url,p=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){O(e,t,n[t])})}return e}({board_id:t.id,url:d,pin_id:s.id,pin_image_url:d},c?{crop_x:c.cropX,crop_y:c.cropY,height:c.height,width:c.width,scale:c.scale}:{}),m={height:u.height,width:u.width,x:c?c.cropX:0,y:c?c.cropY:0};a.a.create("BoardResource",p).callUpdate().then(function(){n.setState({isSaving:!1}),n.props.onSave(d,m),r(Object(i.a)(t.id,{custom_cover:!0,scale:c?c.scale:1,pin_id:s.id,crop:m,image_url:d}))}).catch(function(){n.setState({isSaving:!1})})}}),O(w(w(n)),"updateImgCrop",function(e){return n.setState({imgCropData:e})}),O(w(w(n)),"handleShowNextPin",function(){var e=(n.pins||[]).length;e&&n.setState(function(t){return{coverPinIndex:(t.coverPinIndex+1)%e}})}),O(w(w(n)),"handleShowPrevPin",function(){var e=(n.pins||[]).length;e&&n.setState(function(t){return{coverPinIndex:(t.coverPinIndex||e)-1}})}),n}var n,l,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,r["Component"]),n=t,(l=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.boardFeedResource.data;!this.props.boardFeedResource.data&&t&&this.setState({coverPinIndex:P(e)})}},{key:"componentDidUpdate",value:function(e){var t=this.props.boardFeedResource.data,n=e.boardFeedResource.data;(t&&n!==t&&t.length||t&&n&&t.length!==n.length)&&t.forEach(function(e){"pin"===e.type&&((new Image).src=e.url)})}},{key:"render",value:function(){var e=this.props,t=e.boardName,n=e.frameHeight,a=e.frameWidth,i=e.onCancel,l=this.state.coverPinIndex,s=this.pins||[],u=s[l];return r.createElement(c.b,{width:708},r.createElement("div",{className:"standardForm"},r.createElement("h1",null,r.createElement("strong",null,o.a._("Change Board Cover"))," / ".concat(t)),r.createElement(c.b,{width:"100%"},r.createElement(c.b,{position:"relative",dangerouslySetInlineStyle:{__style:{userSelect:"none"}}},u?r.createElement(y,{boardName:t,frameHeight:n,frameWidth:a,isFirst:!l,isLast:l===s.length-1,pin:u,showNextPin:this.handleShowNextPin,showPrevPin:this.handleShowPrevPin,updateImgCrop:this.updateImgCrop}):r.createElement(h,null)),r.createElement("div",{className:"formFooter"},r.createElement("div",{className:"formFooterButtons"},r.createElement(c.b,{display:"inlineBlock",marginRight:2},r.createElement(c.c,{inline:!0,onClick:i,text:o.a._("Cancel")})),r.createElement(c.c,{disabled:!u,inline:!0,onClick:this.handleSave,text:o.a._("Save Changes","Button for saving board cover edit"),color:"red"}))))))}},{key:"pins",get:function(){var e=this.props.boardFeedResource.data;return e?I(e):void 0}}])&&E(n.prototype,l),s&&E(n,s),t}(),B=Object(v.b)({name:"BoardImagesFeedResource",options:function(e){return{board_id:e.board.id,page_size:50,filter_section_pins:!1}},key:"boardFeedResource"})(k),j=(n("hvnN"),function(e){var t=e.children;return r.createElement(c.b,{role:"list"},r.Children.map(t,function(e,t){return e&&r.createElement(c.b,{key:t},e,r.createElement(c.j,null))}))}),D=function(e){var t=e.label,n=e.labelId;return n?r.createElement(c.q,{htmlFor:n},r.createElement(c.K,{size:"sm"},t)):r.createElement(c.K,{size:"sm"},t)};function R(e){var t=e.alignTop,n=e.children,o=e.label,a=e.labelId;return r.createElement(c.b,{alignItems:t?"stretch":"center",deprecatedPadding:{x:2,y:3},display:"flex",wrap:!0},r.createElement(c.b,{paddingY:3,paddingX:1,xs:{column:12},md:{column:3}},r.createElement(D,{label:o,labelId:a})),r.createElement(c.b,{xs:{column:12},md:{column:9}},n))}var x=n("D+W/"),T=n("ivDc"),A=n("AIe5"),N=n("UhjI"),L=n("QG6s"),H=n("UmN8"),F=n("Irlq"),U=n("ovu7");function z(e){return(z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return G});var G=function(e){function t(e,n){var r,a,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=this,i=W(t).call(this,e,n),r=!i||"object"!==z(i)&&"function"!=typeof i?X(a):i,Y(X(X(r)),"handleChangeName",function(e){var t=e.value,n=Object(U.t)(r.nameValidators,t);r.setState({name:t,nameValidatorErrors:n})}),Y(X(X(r)),"handleChangeDescription",function(e){var t=e.value,n=Object(U.t)(r.descriptionValidators,t);r.setState({description:t,descriptionValidatorErrors:n})}),Y(X(X(r)),"handleChangeCategory",function(e){var t=e.value;r.setState({category:t})}),Y(X(X(r)),"handleChangePrivateToggle",function(e){var t=e.checked;r.setState({privacy:t?"secret":"public"})}),Y(X(X(r)),"handleChangeRecommendationToggle",function(e){var t=e.checked;r.setState({allowHomefeedRecommendations:t})}),Y(X(X(r)),"handleChangeCollabBoardEmail",function(e){var t=e.value;r.setState({collab_board_email:t})}),Y(X(X(r)),"handleChangeCollaboratorInvitesEnabled",function(e){var t=e.value;r.setState({collaboratorInvitesEnabled:t})}),Y(X(X(r)),"handleCancel",function(){N.a.trackEvent(r.props.gaCategory,"click_cancel"),r.props.onClose()}),Y(X(X(r)),"handleSubmit",function(e){var t=r.props.onSubmit,n=r.state,a=n.category,i=n.collab_board_email,l=n.collaboratorInvitesEnabled,c=n.description,s=n.name,u=n.privacy,d=n.allowHomefeedRecommendations;if(e&&e.preventDefault(),!r.submitDisabled()){var p=s.trim(),m=c.trim();r.setState({submitting:!0,submitError:""}),N.a.trackEvent(r.props.gaCategory,"click_submit"),t({name:p,category:a,collab_board_email:i,collaborator_invites_enabled:l,description:m,privacy:u,allow_homefeed_recommendations:d}).then(function(){r.setState({submitting:!1})}).catch(function(e){var t=o.a._("Uh oh! Something went wrong.");if(e.message){var n=e.message,a=e.message_detail;t=a?"".concat(n," ").concat(a):n}else"string"==typeof e&&(t=e);r.setState({submitting:!1,submitError:t})})}}),Y(X(X(r)),"handleShowBoardCoverEditModal",function(){r.setState({showBoardCoverEdit:!0})}),Y(X(X(r)),"handleHideBoardCoverEditModal",function(){r.setState({showBoardCoverEdit:!1})}),Y(X(X(r)),"handleSaveBoardCoverEditModal",function(e,t){r.handleHideBoardCoverEditModal();var n=r.props.onCropChange;n&&n(e,t)});var l=e.board,c=l.category,s=l.collab_board_email,u=l.collaborator_invites_enabled,d=l.description,p=l.name,m=l.pin_count,f=l.privacy,b=l.allow_homefeed_recommendations;return r.state={category:c,collab_board_email:s,description:d,name:p,pin_count:m,privacy:f,allowHomefeedRecommendations:b,collaboratorInvitesEnabled:u,nameValidatorErrors:[],descriptionValidatorErrors:[],showBoardCoverEdit:!1,showDeleteConfirmation:!1,submitting:!1},Object(F.b)(o.a._("Please enter no more than {{ maxLength }} characters.","Validation error when a string is too long"),{maxLength:x.a.MAX_CHARS_FOR_BOARD_TITLE}),r.descriptionValidators=[Object(U.k)({max:x.a.MAX_CHARS_FOR_BOARD_PIN_DESCRIPTION})],r.nameValidators=[Object(U.q)({message:o.a._("Don't forget to name your board!")}),Object(U.k)({max:x.a.MAX_CHARS_FOR_BOARD_TITLE})],r}var n,a,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(t,r["Component"]),n=t,(a=[{key:"UNSAFE_componentWillReceiveProps",value:function(e){if(e.board.name!==this.props.board.name){var t=Object(U.t)(this.nameValidators,e.board.name);this.setState({name:e.board.name,nameValidatorErrors:t})}if(e.board.description!==this.props.board.description){var n=Object(U.t)(this.descriptionValidators,e.board.description);this.setState({description:e.board.description,descriptionValidatorErrors:n})}e.board.category!==this.props.board.category&&this.setState({category:e.board.category}),e.board.privacy!==this.props.board.privacy&&this.setState({privacy:e.board.privacy})}},{key:"getBoardTitleInput",value:function(){var e=this.state,t=e.name,n=e.nameValidatorErrors;return r.createElement(c.b,{role:"listitem"},r.createElement(R,{label:o.a._("Name"),labelId:"boardEditName"},r.createElement(T.a,{error:n.join(", "),id:"boardEditName",name:"boardName",onChange:this.handleChangeName,placeholder:o.a._('Like "Places to Go" or "Recipes to Make"'),value:t})))}},{key:"getCategoriesDropdown",value:function(){var e=this.props.categories.map(function(e){return{label:e.name,value:e.key}}),t=o.a._("What kind of board is it?"),n=this.state.category||null;return r.createElement(c.b,{role:"listitem"},r.createElement(R,{label:o.a._("Category"),labelId:"boardEditCategory"},r.createElement(c.F,{id:"boardEditCategory",name:"category",onChange:this.handleChangeCategory,options:e,placeholder:t,value:n})))}},{key:"getCollaboratorsEmailCheckbox",value:function(){var e=this.props.board,t=this.state.collab_board_email;return e.is_collaborative&&r.createElement(c.b,{role:"listitem"},r.createElement(R,{label:o.a._("Email notifications"),labelId:"emailNotificationsCheckbox"},r.createElement(c.b,{alignItems:"center",deprecatedPadding:{y:2},display:"flex"},r.createElement(c.b,{deprecatedMargin:{right:1}},r.createElement(c.I,{switched:t,id:"emailNotificationsCheckbox",name:"email",onChange:this.handleChangeCollabBoardEmail})),r.createElement(c.K,{size:"xs",smSize:"xs",mdSize:"xs",lgSize:"xs"},o.a._("Get an email when someone saves Pins to this board")))))}},{key:"getCollaboratorsInviteList",value:function(){var e=this.props.boardCollaboratorsSection,t=r.createElement(c.b,null,o.a._("Collaborators"),r.createElement(c.b,null,r.createElement(c.t,{target:"blank",href:x.a.GEN.templateConst.settings.HELP_BOARDS_INVITE_URL_SRC_CREATE},r.createElement(c.K,{size:"sm",smSize:"xs",mdSize:"xs",lgSize:"sm"},o.a._("Learn more")))));return e?r.createElement(c.b,{role:"listitem"},r.createElement(R,{alignTop:!0,label:t,labelId:"collaborators"},r.createElement(c.b,{paddingY:3},r.createElement("div",{className:"boardCollaboratorsWrapper"},e)))):null}},{key:"getCollaboratorsInviteToggle",value:function(){var e=this.props.board,t=this.state.collaboratorInvitesEnabled;return e.is_collaborative&&r.createElement(c.b,{role:"listitem"},r.createElement(R,{label:o.a._("Let collaborators add people"),labelId:"collaboratorInvitesEnabledCheckbox"},r.createElement(c.b,{deprecatedPadding:{y:2}},r.createElement(c.I,{switched:t,id:"collaboratorInvitesEnabledCheckbox",name:"collaboratorInvitesEnabled",onChange:this.handleChangeCollaboratorInvitesEnabled}))))}},{key:"getCoverEdit",value:function(){var e=this.props,t=e.board,n=e.coverImageHeight,a=e.coverImageWidth,i=e.isEditable,l=this.state,s=l.name,u=l.pin_count;return i&&u>0&&r.createElement(c.b,{role:"listitem"},r.createElement(R,{label:o.a._("Cover")},r.createElement(c.c,{inline:!0,onClick:this.handleShowBoardCoverEditModal,text:o.a._("Change"),size:"md"}),this.state.showBoardCoverEdit&&r.createElement(L.a,{onHide:this.handleHideBoardCoverEditModal},r.createElement(B,{board:t,boardName:s,frameHeight:n,frameWidth:a,onCancel:this.handleHideBoardCoverEditModal,onSave:this.handleSaveBoardCoverEditModal}))))}},{key:"getDescriptionInput",value:function(){var e=this.state,t=e.description,n=e.descriptionValidatorErrors,a="boardEditDescription";return r.createElement(c.b,{role:"listitem"},r.createElement(R,{alignTop:!0,label:o.a._("Description"),labelId:a},r.createElement(A.a,{error:n.join(", "),id:a},r.createElement(c.L,{id:a,name:"description",onChange:this.handleChangeDescription,placeholder:o.a._("What's your board about?"),value:t}))))}},{key:"getFormFooter",value:function(){var e=this.props,t=e.board.archived_by_me_at,n=e.isArchivable,a=e.isDeletable,i=e.onArchiveButtonClick,l=e.onDeleteButtonClick,s=e.onMergeButtonClick,u=e.onUnarchiveButtonClick,d=e.submitText,p=this.state,m=p.submitError,f=p.submitting;return r.createElement(c.b,{paddingX:4,paddingY:2},r.createElement(c.b,{alignItems:"center",justifyContent:"between",wrap:!0,display:"flex"},r.createElement(c.b,{display:"flex",alignItems:"center",paddingY:2,marginLeft:-2,marginRight:-2},a&&r.createElement(c.b,{paddingX:2,"data-test-id":"deleteBoardButton"},r.createElement(c.c,{disabled:f,inline:!0,onClick:l,size:"md",text:o.a._("Delete","button label during board edit")})),n&&!t&&r.createElement(c.b,{paddingX:2},r.createElement(c.c,{disabled:f,inline:!0,onClick:i,size:"md",text:o.a._("Archive","button label during board edit")})),t&&r.createElement(c.b,{paddingX:2},r.createElement(c.c,{disabled:f,inline:!0,onClick:u,size:"md",text:o.a._("Unarchive","button label during board edit")})),s&&r.createElement(c.b,{paddingX:2},r.createElement(c.c,{disabled:f,inline:!0,onClick:s,size:"md",text:o.a._("Merge","button label during board edit")}))),r.createElement(c.b,null,r.createElement(c.b,{display:"flex",paddingY:2,marginLeft:-2,marginRight:-2},r.createElement(c.b,{paddingX:2},r.createElement(c.c,{inline:!0,onClick:this.handleCancel,text:o.a._("Cancel"),size:"md"})),r.createElement(c.b,{paddingX:2},r.createElement(c.c,{color:"red",disabled:this.submitDisabled(),inline:!0,text:d,type:"submit",size:"md"}))))),m&&r.createElement(c.b,{paddingX:1,paddingY:2},r.createElement(c.K,{color:"red",smSize:"xs",mdSize:"sm",lgSize:"md"},m)))}},{key:"getSecretToggle",value:function(){var e=this.props.isAdAccountOwner,t=this.state.privacy;if(!1===e)return r.createElement(c.b,{role:"listitem"},r.createElement(R,{label:o.a._("Protected board (not listed on user's profile)","protected board"),labelId:"protected"},r.createElement(c.b,{deprecatedPadding:{y:2}},r.createElement(c.I,{onChange:function(){},id:"protected",switched:!0,disabled:!0}))));if(t!==x.a.BoardPrivacy.PROTECTED){var n=r.createElement(c.b,null,o.a._("Visibility"));return r.createElement(c.b,{role:"listitem"},r.createElement(R,{label:n,labelId:"secret"},r.createElement(c.b,{display:"flex",paddingY:2,alignItems:"center"},r.createElement(c.b,{marginRight:3},r.createElement(c.e,{checked:"secret"===t,id:"secret",name:"secret",onChange:this.handleChangePrivateToggle})),r.createElement(c.b,null,r.createElement(c.K,{size:"sm",smSize:"xs",mdSize:"xs",lgSize:"sm"},o.a._("Keep this board secret.","Caption for board settings to set visibility")),r.createElement(c.t,{target:"blank",href:x.a.GEN.templateConst.settings.HELP_BOARDS_SECRET_URL_SRC_CREATE},r.createElement(c.K,{size:"sm",smSize:"xs",mdSize:"xs",lgSize:"sm",bold:!0},o.a._("Learn more")))))))}return null}},{key:"getRecommendationToggle",value:function(){var e=this.state.allowHomefeedRecommendations,t=r.createElement(c.b,null,o.a._("Personalization"));return r.createElement(c.b,{role:"listitem"},r.createElement(R,{label:t,labelId:"recommendation"},r.createElement(c.b,{display:"flex",paddingY:2,alignItems:"center"},r.createElement(c.b,{marginRight:3},r.createElement(c.e,{checked:e,id:"recommendation",name:"recommendation",onChange:this.handleChangeRecommendationToggle})),r.createElement(c.b,null,r.createElement(c.K,{size:"sm",smSize:"xs",mdSize:"xs",lgSize:"sm"},o.a._("Show Pins inspired by this board in your home feed.","Caption for board settings to set visibility"))))))}},{key:"getBoardFormFields",value:function(){var e=this,t=this.props,n=t.board.archived_by_me_at,o=t.currentUserIsOwner,a=t.isNameAndSecretView;return o?a?r.createElement(j,null,this.getBoardTitleInput(),this.getSecretToggle()):r.createElement(j,null,this.getBoardTitleInput(),this.getDescriptionInput(),this.getCategoriesDropdown(),this.getCoverEdit(),this.getSecretToggle(),!n&&r.createElement(H.a,{name:"web_homefeed_control_board_recommendation_toggle"},function(t){return t.anyEnabled&&e.getRecommendationToggle()}),this.getCollaboratorsInviteList(),this.getCollaboratorsEmailCheckbox(),this.getCollaboratorsInviteToggle()):r.createElement(j,null,this.getCollaboratorsInviteList(),this.getCollaboratorsEmailCheckbox())}},{key:"submitDisabled",value:function(){var e=this.state,t=e.descriptionValidatorErrors,n=e.name,r=e.nameValidatorErrors,o=e.submitting;return!n||r.length>0||t.length>0||o}},{key:"render",value:function(){var e=this.props.noHeader;return r.createElement(c.b,{color:"white",deprecatedMargin:{left:"auto",right:"auto"},maxWidth:600,shape:"rounded"},r.createElement("form",{method:"post",onSubmit:this.handleSubmit},!e&&r.createElement(r.Fragment,null,r.createElement(c.b,{deprecatedMargin:{right:5},deprecatedPadding:{x:2,y:3}},this.props.title),r.createElement(c.j,null)),this.getBoardFormFields(),this.getFormFooter()))}}])&&M(n.prototype,a),i&&M(n,i),t}();Y(G,"defaultProps",{isNameAndSecretView:!1})},evwu:function(e,t,n){"use strict";n.d(t,"g",function(){return b}),n.d(t,"h",function(){return h}),n.d(t,"b",function(){return g}),n.d(t,"i",function(){return y}),n.d(t,"e",function(){return v}),n.d(t,"d",function(){return _}),n.d(t,"l",function(){return E}),n.d(t,"f",function(){return S}),n.d(t,"c",function(){return w}),n.d(t,"a",function(){return O}),n.d(t,"k",function(){return I}),n.d(t,"j",function(){return P});var r=n("UhjI"),o=n("wCwf"),a=n("ePT2"),i=n("eB/M"),l=n("j/DJ"),c=n("3Wjl"),s=n("7Iyi");function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){d(e,t,n[t])})}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p="board_create",m="board_delete",f="board_edit";function b(){return{type:"BOARDS_FETCH_ALL_IF_NEEDED",payload:{}}}function h(){return{type:"BOARDS_FETCH_LAST_PINNED_TO_IF_NEEDED",payload:{}}}function g(e,t){return Object(s.a)("BoardResource",{board_id:e,field_set_key:t})}function y(){return function(e,t){var n=t().viewer;n.isAuth&&Object(l.b)(n.username).forEach(function(t){e(t)})}}function v(e){var t=u({},e);return function(n){return n({type:"BOARD_CREATE",payload:{board:e}}),a.a.create("BoardResource",t).callCreate().then(function(e){r.a.trackEvent(p,"success");var o=e.resource_response.data;return o&&(n(y()),n(function(){return{type:"BOARD_CREATE_COMPLETE",payload:{options:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},board:arguments.length>1?arguments[1]:void 0},error:arguments.length>2?arguments[2]:void 0}}(t,o))),o}).catch(function(e){throw r.a.trackEvent(p,"error"),e})}}function _(){return{type:"BOARD_UPDATE_COMPLETE",payload:{options:arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},board:arguments.length>1?arguments[1]:void 0},error:arguments.length>2?arguments[2]:void 0}}function E(e){return function(t){var n=void 0===e.collaborator_requests_enabled||null===e.collaborator_requests_enabled?{}:{collaborator_requests_enabled:e.collaborator_requests_enabled},o=u({board_id:e.id,name:e.name,description:e.description,category:e.category,privacy:e.privacy,collab_board_email:e.collab_board_email,collaborator_invites_enabled:e.collaborator_invites_enabled,allow_homefeed_recommendations:e.allow_homefeed_recommendations},n);return t({type:"BOARD_UPDATE",payload:{boardUpdateOptions:o}}),a.a.create("BoardResource",o).callUpdate().then(function(n){r.a.trackEvent(f,"success");var a=n&&n.resource_response&&n.resource_response.data||e;t(_(o,a))}).catch(function(e){throw r.a.trackEvent(f,"error"),e})}}function C(e,t){return{type:"BOARD_DELETE_COMPLETE",payload:{boardId:e},error:t}}function S(e){return function(t,n){var o=n().boards.content[e],i=o.pin_count,l=o.owner.id;return t({type:"BOARD_DELETE",payload:{boardId:e}}),a.a.create("BoardResource",{board_id:e}).callDelete().then(function(){r.a.trackEvent(m,"error"),t(C(e)),t(Object(c.a)({userId:l,increment:-i}))}).catch(function(e){throw r.a.trackEvent(m,"error"),e})}}function w(e){return{type:"BOARD_PIN_TO",payload:{board:e}}}function O(e){return function(t){return t(function(e){return{type:"BOARD_ARCHIVED",payload:{boardId:e}}}(e)),a.a.create("BoardArchiveResource",{boardId:e}).callUpdate()}}function I(e){return function(t){return t(function(e){return{type:"BOARD_UNARCHIVED",payload:{boardId:e}}}(e)),a.a.create("BoardArchiveResource",{boardId:e}).callDelete()}}function P(e,t){return function(n){return a.a.create("BoardsMergeResource",{source_board_id:e,target_board_id:t}).callUpdate().then(function(){return Promise.all([n(C(e)),n(g(t,"pin_count")),n(Object(o.a)(i.b.BOARD_SECTIONS,t))])})}}},"j/DJ":function(e,t,n){"use strict";n.d(t,"c",function(){return l}),n.d(t,"a",function(){return c}),n.d(t,"b",function(){return s});var r=n("HQ9/"),o=n("wCwf"),a=n("7Iyi"),i=["alphabetical","last_pinned_to","oldest","newest","custom"],l={name:"BoardsResource",key:"boardsResource",options:function(e){var t=e.boardOrder,n=e.mixPublicSecret;return{privacy_filter:"all",sort:t||"last_pinned_to",field_set_key:"profile_grid_item",username:e.username,page_size:25,group_by:n?"mix_public_private":"visibility",include_archived:!0,redux_normalize_feed:!0}}},c=function(e,t,n){return{privacy_filter:t?"secret":"public",sort:n||"last_pinned_to",field_set_key:"profile_grid_item",username:e}},s=function(e){return i.reduce(function(t,n){var i=[Object(o.a)("profileBoards",Object(r.c)(e,n))];return[!0,!1].forEach(function(t){i.push(Object(a.f)(l.name,l.options({username:e,boardOrder:n,mixPublicSecret:t})))}),t.concat(i)},[])}},tsSC:function(e,t,n){"use strict";n.d(t,"a",function(){return y});var r=n("GyhR");function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=32,d=100,p=null,m=!1,f=[],b=function(){p&&clearTimeout(p),m=!0,p=setTimeout(function(){m=!1},d)},h=function(e){0===f.length&&window.addEventListener("scroll",b),f.push(e)},g=function(e){var t=f.indexOf(e);f.splice(t,1),0===f.length&&window.removeEventListener("scroll",b)};function y(e){return function(t){function n(){var e,t,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);for(var l=arguments.length,u=new Array(l),d=0;d<l;d++)u[d]=arguments[d];return r=this,a=(e=i(n)).call.apply(e,[this].concat(u)),t=!a||"object"!==o(a)&&"function"!=typeof a?c(r):a,s(c(c(t)),"state",{isHovering:!1}),s(c(c(t)),"handlers",{onMouseOver:function(){return t._setHover(!0)},onMouseLeave:function(){return t._setHover(!1)}}),t}var p,f,b;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(n,r["Component"]),p=n,(f=[{key:"componentDidMount",value:function(){h(this)}},{key:"componentWillUnmount",value:function(){this.hoverTimer&&clearTimeout(this.hoverTimer),g(this)}},{key:"_setHover",value:function(e){var t=this;this.hoverTimer&&clearTimeout(this.hoverTimer),this.hoverTimer=e&&m?setTimeout(function(){return t._setHover(e)},d):setTimeout(function(){e!==t.state.isHovering&&t.setState({isHovering:e})},u)}},{key:"render",value:function(){return r.createElement(e,Object.assign({},this.props,{hoverHandlers:this.handlers,isHovering:this.state.isHovering}))}}])&&a(p.prototype,f),b&&a(p,b),n}()}},wCwf:function(e,t,n){"use strict";function r(e,t){return{type:"FEED_INVALIDATE",payload:{feedType:e,feedId:t}}}n.d(t,"a",function(){return r})},z2nR:function(e,t,n){"use strict";var r=n("GyhR"),o=n.n(r),a=n("Ivf5"),i=n("JXQe"),l=n("D+W/"),c=n("Qo1m"),s=n("evwu"),u=n("+U6O"),d=n("VcmA"),p=n("0Wmr");function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){v(e,t,n[t])})}return e}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){function t(){var e,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return r=this,o=(e=h(t)).call.apply(e,[this].concat(i)),n=!o||"object"!==m(o)&&"function"!=typeof o?y(r):o,v(y(y(n)),"state",{creating:!1,selectedCollaborators:[]}),v(y(y(n)),"handleSubmit",function(e){var t=n.props,r=t.advertiserId,o=t.dispatch,a=t.isAdAccountOwner,i=t.onBoardCreate,l=f({name:e.name,description:e.description,category:e.category,privacy:e.privacy,collab_board_email:e.collab_board_email,collaborator_invites_enabled:e.collaborator_invites_enabled},!a&&r?{advertiser_id:r}:{});return n.setState({creating:!0}),o(Object(s.e)(l)).then(function(e){n.inviteSelectedColaborators(e.id),i(e)}).finally(function(){return n.setState({creating:!1})})}),v(y(y(n)),"handleSelectedCollaboratorsChange",function(e){n.setState({selectedCollaborators:e})}),v(y(y(n)),"emptyBoardData",{collab_board_email:!0,collaborator_invites_enabled:!1,id:"",is_collaborative:!1,name:"",description:"",category:"other",owner:{username:n.props.username},pin_count:0}),n}var n,a,_;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(t,r["Component"]),n=t,(a=[{key:"inviteSelectedColaborators",value:function(e){var t=this.state.selectedCollaborators.filter(function(e){return"email"===e.type});t.length>=1&&Object(p.c)(e,t.map(function(e){return e.type}));var n=this.state.selectedCollaborators.filter(function(e){return e.type.startsWith("user")});n.length>=1&&Object(p.d)(e,n.map(function(e){return e.id}))}},{key:"render",value:function(){var e=this.props,t=e.categories,n=e.isAdAccountOwner,r=e.noHeader,a=e.onClose,s=e.privacy;return o.a.createElement(d.a,{board:f({},this.emptyBoardData,{privacy:n?s:l.a.BoardPrivacy.PROTECTED}),boardCollaboratorsSection:o.a.createElement("div",null,o.a.createElement(i.a,{onSelectedCollaboratorsChange:this.handleSelectedCollaboratorsChange})),categories:t,currentUserIsOwner:!0,gaCategory:"board_create",isAdAccountOwner:n,isDeletable:!1,isEditable:!0,isNameAndSecretView:!0,noHeader:r,onClose:a,onSubmit:this.handleSubmit,submitText:c.a._("Create"),title:o.a.createElement(u.m,{size:"xs"},c.a._("Create board"))})}}])&&b(n.prototype,a),_&&b(n,_),t}();v(_,"defaultProps",{privacy:l.a.BoardPrivacy.PUBLIC});var E=Object(a.connect)(function(e){var t=e.advertiser,n=e.viewer,r=!t||n.isAuth&&t.owner_user_id===n.id,o=t&&t.id;return f({isAdAccountOwner:r,username:n.isAuth?n.username:""},o?{advertiserId:o}:{})})(_),C=n("dsfX"),S=n("Y2BC");t.a=Object(S.b)({name:"CategoriesResource",key:"categoriesResource"},{allowstate:!1})(function(e){var t=e.categoriesResource,n=t.data,o=t.isLoaded,a=e.onBoardCreate,i=e.onClose,l=e.privacy;return r.createElement(C.a,{accessibilityCloseLabel:c.a._("Cancel","accessibility label for canceling create board modal"),accessibilityModalLabel:c.a._("Create","accessibility label for create board modal"),heading:c.a._("Create board","header for create board modal"),onDismiss:i,size:"md"},o&&n?r.createElement(E,{categories:n,onBoardCreate:a,onClose:i,privacy:l,noHeader:!0}):r.createElement(u.G,{accessibilityLabel:c.a._("Create a board","Spinner while the create board modal is loading"),show:!0}))})}}]);